(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{50:function(e,t,n){e.exports=n(80)},60:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),c=n.n(o),l=n(15),s=n(6),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,isAdmin:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return console.log("loginss",t.payload),{isLoggedIn:!0,user:t.payload.user,token:t.payload.token,isAdmin:"admin"===t.payload.user.role};case"LOGOUT":return{isLoggedIn:!0};default:return e}},u=n(17),m={query:"",isFetching:!1,data:{items:[]},error:""},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"RECEIVE_PROJECTS":return Object(u.a)({},e,{data:t.payload,isFetching:!1});case"SEARCH_MOVIE":return Object(u.a)({},e,{isFetching:!0,query:t.query});default:return e}},f=Object(l.c)({user:i,projects:d}),p=(n(59),n(43)),E=(n(60),n(44)),g=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}},b=n.n(E).a.create({baseURL:"http://localhost:8081",timeout:1e3}),v=function(e,t,n){var a={method:e,url:t,data:n,headers:{"x-access-token":g()?g().user.token:""}};return"get"===e&&n&&(a=Object(u.a)({},a,{params:n})),console.log("obj",a),b().then((function(e){return e.data})).catch((function(e){return Promise.reject(e)}))},h={get:function(e,t){return v("get",e,t)},post:function(e,t){return v("post",e,t)}},j=function(e){return console.log("payload",e),{type:"RECEIVE_PROJECTS",payload:e}},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;console.log("query",e);parseInt(t);return function(e){return console.log("hi"),h.get("/projects").then((function(t){e(j(t))})).catch((function(e){}))}},y=Object(s.b)((function(e){return{isLoggedIn:e.user.isLoggedIn,user:e.user.user}}))((function(e){return e.isLoggedIn?r.a.createElement("nav",{class:"navbar navbar-dark"},r.a.createElement("div",{class:"container-fluid"},r.a.createElement("div",{class:"navbar-header"},r.a.createElement("a",{class:"navbar-brand",href:"#"},"Project Todo")))):r.a.createElement("div",null)})),w=n(48),I=n(21),L=n(16);var N=Object(s.b)((function(e,t){return console.log("stated",e.user),{isLoggedIn:e.user.isLoggedIn,isAdmin:e.user.isAdmin}}),(function(e){return{login:function(t){return e(function(e){return console.log("login",e),function(t){return console.log("hi"),h.post("/authenticate",e).then((function(e){console.log("abc",e),t({type:"LOGIN",payload:e})})).catch((function(e){}))}}(t))}}}))((function(e){var t=(Object(L.h)().state||{from:{pathname:"/"}}).from;return console.log("props",e.isLoggedIn),e.isLoggedIn?r.a.createElement(L.a,{to:{pathname:e.isAdmin?"/admin":"/projects",state:{from:t}}}):r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-8 col-xs-12"}),r.a.createElement("div",{className:"col-xs-12 col-sm-4"},r.a.createElement("form",{onSubmit:function(t){t.preventDefault(),console.log("data");var n=new FormData(t.target);console.log(n),e.login(Object.fromEntries(n))}},r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"email"},"Email address:"),r.a.createElement("input",{type:"email",class:"form-control",name:"email"})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"pwd"},"Password:"),r.a.createElement("input",{type:"password",class:"form-control",name:"password"})),r.a.createElement("button",{type:"submit",class:"btn btn-info"},"Login"))))})),_=n(18),S=n.n(_),x=n(26);function A(e){var t=e.project;return r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("div",{className:"card"},r.a.createElement("h5",null,t.name),"Developers: ",t.users.length,r.a.createElement(I.b,{to:"/project/"+t._id},"view")))}var C=Object(s.b)((function(e){return{projects:e.projects.data}}),(function(e){return{fetchProjects:function(){return e(O())}}}))((function(e){var t=e.projects,n=e.fetchProjects,o=e.openModal;return console.log("projects",t),Object(a.useEffect)((function(){n()}),[]),t.docs?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h4",null,"My Projects"),r.a.createElement("button",{class:"btn btn-info btn-sm",style:{float:"right"},onClick:function(e){return o()}},"Create Project")),r.a.createElement("div",{className:"row project-list"},t.docs.map((function(e){return r.a.createElement(A,{project:e})})))):r.a.createElement("div",null)})),P=n(84),k=n(85);var T=Object(s.b)((function(e){return{user:e.user.user}}),{getProjects:O})((function(e){var t=e.project,n=void 0===t?{}:t;console.log("user",e.user);var a=[];return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{show:e.show,onHide:e.handleClose},r.a.createElement(P.a.Header,{closeButton:!0},r.a.createElement(P.a.Title,null,n.id?"Edit "+n.name:"New"," ")),r.a.createElement(P.a.Body,null,r.a.createElement("form",{class:"form-horizontal",onSubmit:function(t){var r,o;return S.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t.preventDefault(),console.log("data"),r=new FormData(t.target),console.log(Object.fromEntries(r)),o=Object.fromEntries(r),o=Object(u.a)({},o,{users:a,createdBy:e.user._id}),console.log("projectdata",o),!n._id){c.next=12;break}return c.next=10,S.a.awrap(h.put("/projects/"+n._id,o));case 10:c.next=14;break;case 12:return c.next=14,S.a.awrap(h.post("/projects/",o));case 14:e.getProjects();case 15:case"end":return c.stop()}}))}},r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"email"},"Name"),r.a.createElement("input",{type:"text",class:"form-control",name:"name"})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"pwd"},"Developers:"),r.a.createElement("select",{className:"form-control",multiple:!0,name:"users",onChange:function(e){e.target.name&&console.log(e.target.value);for(var t=e.target.options,n=[],r=0,o=t.length;r<o;r++)t[r].selected&&n.push(t[r].value);a=n,console.log(n)}},e.users.map((function(e){return r.a.createElement("option",{value:e._id},e.name)})))),r.a.createElement(k.a,{variant:"secondary",onClick:e.handleClose},"Close"),r.a.createElement("input",{type:"submit",className:"btn btn-info",value:"Submit"})))))}));var D=Object(s.b)((function(e,t){return{projects:e.projects}}))((function(e){var t=Object(a.useState)({}),n=Object(x.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(!1),s=Object(x.a)(l,2),i=s[0],u=s[1],m=Object(a.useState)([]),d=Object(x.a)(m,2),f=d[0],p=d[1];return Object(a.useEffect)((function(){!function(){var e;S.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.a.awrap(h.get("/users"));case 2:e=t.sent,console.log("users",e.docs),p(e.docs);case 5:case"end":return t.stop()}}))}()}),[]),r.a.createElement("div",null,r.a.createElement(T,{project:o,show:i,handleClose:function(){u(!1)},users:f}),r.a.createElement(C,{openModal:function(e){c(e),u(!0)}}))})),R={isAuthenticated:!1,authenticate:function(e){R.isAuthenticated=!0,setTimeout(e,100)},signout:function(e){R.isAuthenticated=!1,setTimeout(e,100)}};function F(e){var t=e.children,n=Object(w.a)(e,["children"]);return r.a.createElement(L.b,Object.assign({},n,{render:function(e){var n=e.location;return R.isAuthenticated?t:r.a.createElement(L.a,{to:{pathname:"/login",state:{from:n}}})}}))}function J(){return r.a.createElement("h3",null,"Protected")}var V=Object(s.b)((function(e,t){return{isLoggedIn:e.user.isLoggedIn,isAdmin:e.user.isAdmin}}))((function(e){return r.a.createElement(I.a,null,r.a.createElement("div",null,r.a.createElement(L.d,null,r.a.createElement(F,{exact:!0,path:"/"},r.a.createElement(J,null)),r.a.createElement(L.b,{path:"/login"},r.a.createElement(N,null)),r.a.createElement(F,{path:"/protected"},r.a.createElement(J,null)),r.a.createElement(L.b,{path:"/admin",render:function(t){var n=t.location;return e.isLoggedIn&&e.isAdmin?r.a.createElement(D,null):r.a.createElement(L.a,{to:{pathname:"/login",state:{from:n}}})}}))))}));var q=g(),B=Object(l.e)(f,q,Object(l.d)(Object(l.a)(p.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));B.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){}}(B.getState())})),c.a.render(r.a.createElement(s.a,{store:B},r.a.createElement((function(){return r.a.createElement("div",{className:"container"},r.a.createElement(y,null),r.a.createElement(V,null),r.a.createElement("div",{className:"row"}))}),null)),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.589d4138.chunk.js.map